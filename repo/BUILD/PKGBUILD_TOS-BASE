# Maintainer: Tom Meyers

pkgname=tos-base
pkgver=5
pkgrel=3
pkgdesc='Minimal package set to contain tos without a GUI'
url='https://tos.odex.be'
arch=('any')
license=('MIT')
provides=('sh')
install="dash.install"
source=("dash.hook")

sha256sums=('ff09bd61cec1d4910685bd02a7bdb0beef9333ac07a272812ef9f85631a44bb8')

depends=(
  # tos base packages
  'tos-keyring' 'tos-tools'
  # useful packages
  'tlp' 'skel' 'system-updater' 'base'  'sudo' 'dash' 'reflector'
  # candy software
  'lsd' 'neofetch' 'chafa'
  # networking
  'networkmanager' 'openssh' 'wget'
  # audio
  'pulseaudio' 'alsa-utils' 'alsa-lib' 'alsa-plugins' 'pulseaudio-alsa' 'pulseaudio-bluetooth' 'bluez' 'bluez-utils' 'pulseaudio'
  # shell
  'zsh' 'zsh-autosuggestions' 'zsh-syntax-highlighting' 'grc'
  # linux
  'linux-firmware' 'amd-ucode' 'intel-ucode' 'kernel-modules-hook'
)
optdepends=('linux-tos: bare metal support')

package() {
  # packaged configuration
  install -Dm644 /dev/stdin "$pkgdir/usr/lib/NetworkManager/conf.d/30-connectivity.conf" <<END
[connectivity]
uri=https://network.odex.be/check_network_status.txt
END

  # post install hook to symlink dash to /bin/sh
  install -Dm 644 "${srcdir}/dash.hook" "${pkgdir}/usr/share/libalpm/hooks/dash.hook"
}
# vim: ts=2 sw=2 et:

